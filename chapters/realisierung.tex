\chapter{Realisierung}


% Dies ist das Hauptkapitel Ihrer Arbeit! Hier wird die Umsetzung der eigenen Ideen und Konzepte
% (Kapitel 3) anhand der gewählten Methoden (Kapitel 4) beschrieben, inkl. der dabei aufgetretenen
% Schwierigkeiten und Einschränkungen.
Die Realisierung lässt sich in drei Iterationen unterteilen.
In der ersten Iteration werden grundlegende Entscheidungen getroffen und die Basis der Arbeit implementiert.
Am Ende der ersten Iteration existiert ein Prototyp,
welcher bei allen Komponenten des System über die minimalen Funktionen verfügt.
Wie im Kapitel \ref{methoden} Methoden beschrieben, folgen darauf zwei weitere Iterationen,
in welchen neue Anforderungen des Auftraggebers umgesetzt werden.

Über das Vorgehen während dieser drei Iterationen wird in den folgenden Passagen berichtet.
Einige Aspekte der Realisierung, bspw. das Datenbankschema,  wurden bewusst nicht in diese Passagen integriert,
da sie sich über die Iteration hinweg erstrecken,
die Veränderungen über die Iteration hinweg jedoch nicht weiter relevant sind.
Über diese wird am Schluss dieses Kapitels berichtet.

\input{chapters/iteration1}
\newpage
\input{chapters/iteration2}
\newpage
\input{chapters/iteration3}
\newpage

\section{Datenbankschema}
\label{rel:db}
Für die Realisierung der ersten Iteration reichte eine Datenbank, welche lediglich Messwerte abspeichern kann.
Durch die zusätzlichen Anforderungen an die Applikation musste auch das Schema der Datenbank
im Verlauf der weiteren Iterationen mehrmals angepasst werden.
In diesem Kapitel wird das finale Datenbankschema genauer beschrieben.


% Gleich zu Beginn des Projektes wurde das Datenbankschema erstellt.
% Dies gibt eine gute Übersicht, ob die für das Projekt benötigten Daten
% abgespeichert werden können. In diesem Fall sind das die Messwerte der Stromzähler
% und die Labels des Benutzers.

% Die Datenbank wurde so einfach wie möglich gehalten, um alle vorgegebenen
% Anforderungen zu erfüllen.

\begin{figure}[H]
    \centering
    \includegraphics[width=1.0\textwidth]{gfx/smic-db}
    \caption{
        Entity-Relationship-Diagramm des Datenbankschemas
    }
    \label{fig:smic-db}
\end{figure}

Wie in Abbildung \ref{fig:smic-db} dargestellt, können in der Datenbank
die verschiedenen Stromzähler mit ihrer Seriennummer abgespeichert werden.
Beispielsweise wird pro Haushalt ein Stromzähler mit einer bestimmten
Seriennummer abgespeichert, sobald dieser zum ersten Mal Daten sendet.
Ein solcher Stromzähler sendet danach einzelne Messdaten zu bestimmten
Zeitpunkten. Die Messdaten beinhalten neben der einer Angabe zum Zeitpunkt der Messung die Spannungswerte der drei Phasen
sowie die gemessene Leistung.

Damit danach abgespeichert werden kann, zu welcher Zeit beispielsweise ein
Toaster gelaufen ist, werden Labels erstellt. Ein solches Label hat eine
Bezeichnung und kann verschiedene Annotationen beinhalten.
Zu einer Annotation gehört jeweils ein Start- und Endzeitpunkt sowie das gewählte Label und der zugehörige Stromzähler.
Durch diese Struktur können danach einfach Auswertungen der Labels über mehrere
Stromzähler und Messpunkte gemacht werden.


